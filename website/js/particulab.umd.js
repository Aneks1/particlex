(function(s,a){typeof exports=="object"&&typeof module<"u"?module.exports=a():typeof define=="function"&&define.amd?define(a):(s=typeof globalThis<"u"?globalThis:s||self,s.particulab=a())})(this,function(){"use strict";var d=Object.defineProperty;var p=(s,a,r)=>a in s?d(s,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[a]=r;var i=(s,a,r)=>p(s,typeof a!="symbol"?a+"":a,r);class s{constructor(t,e,o,c){i(this,"red");i(this,"green");i(this,"blue");i(this,"alpha");if(this.red=t,this.green=e,this.blue=o,this.alpha=c,t>255||t<0||e>255||e<0||o>255||o<0||c>1||c<0)throw new TypeError("Invalid rgba color.")}toHex(){const t=this._componentToHex(this.red),e=this._componentToHex(this.green),o=this._componentToHex(this.blue);return new a(`#${t}${e}${o}`)}_componentToHex(t){const e=t.toString(16);return e.length===1?"0"+e:e}toString(){return`rgba(${this.red}, ${this.green}, ${this.blue}, ${this.alpha})`}}class a{constructor(t){i(this,"hex");t[0]==="#"&&(t=t.slice(1)),t.length===3&&(t=t.split("").map(e=>e+e).join("")),this.hex=t}toRGB(){const t=parseInt(this.hex.slice(0,2),16),e=parseInt(this.hex.slice(2,4),16),o=parseInt(this.hex.slice(4,6),16);return new s(t,e,o,1)}toString(){return`#${this.hex}`}}class r{constructor(t,e){i(this,"parent");i(this,"id");i(this,"position",{x:0,y:0});i(this,"diameter",0);i(this,"life",0);i(this,"speed",{x:0,y:0});i(this,"color",new a("#ffffff"));i(this,"opacity",100);i(this,"deltaDiameter",0);i(this,"deltaOpacity",0);i(this,"fadeOut",{type:null,options:null});i(this,"fadeIn",{type:null,options:null});this.parent=e,this.id=t}init(){if(this.fadeOut.type&&this.fadeOut.options){if(this.fadeOut.type=="opacity"||this.fadeOut.type=="opacity-scale"){const e=this.fadeOut.options;this.deltaOpacity=(e.opacity-this.opacity)/e.duration}if(this.fadeOut.type=="scale"||this.fadeOut.type=="opacity-scale"){const e=this.fadeOut.options;this.deltaDiameter=(e.scaleFactor*this.diameter-this.diameter)/e.duration}}const t=setInterval(()=>{this.position.x+=this.speed.x*60/1e3,this.position.y-=this.speed.y*60/1e3,this.life-=1/60,this.fadeOut.type&&this.fadeOut.options&&this.life<=this.fadeOut.options.duration&&(this.opacity+=this.deltaOpacity*(1/60),this.opacity=Math.max(0,Math.min(100,this.opacity)),this.diameter+=this.deltaDiameter*(1/60),this.diameter=Math.max(0,this.diameter)),this.life<=0&&(clearInterval(t),this.parent.particles.delete(this.id))},this.parent.deltaTime)}}function h(l,t){return{min:l,max:t}}class n{constructor(t,e){i(this,"canvas");i(this,"size");i(this,"lastId",0);i(this,"deltaTime",1e3/60);i(this,"ammount",0);i(this,"particles",new Map);i(this,"diameter",h(1,5));i(this,"life",h(10,15));i(this,"speed",{x:h(-10,10),y:h(-10,10)});i(this,"colors",[]);i(this,"opacity",h(50,100));i(this,"fadeOut",{type:null,options:null});i(this,"fadeIn",{type:null,options:null});this.canvas=t,this.size=e,t.width=e.x,t.height=e.y}static getRandomNumberInInterval(t){const e=Math.ceil(t.min),o=Math.floor(t.max);return Math.floor(Math.random()*(o-e+1))+e}static getRandomElementFromArray(t){const e=Math.floor(Math.random()*t.length);return t[e]}createParticle(){const t=new r(this.lastId.toString(),this);t.position.x=n.getRandomNumberInInterval({min:0,max:this.size.x}),t.position.y=n.getRandomNumberInInterval({min:0,max:this.size.y}),t.diameter=n.getRandomNumberInInterval(this.diameter),t.life=n.getRandomNumberInInterval(this.life),t.speed.x=n.getRandomNumberInInterval(this.speed.x),t.speed.y=n.getRandomNumberInInterval(this.speed.y),t.color=n.getRandomElementFromArray(this.colors||new a("fff")),t.opacity=n.getRandomNumberInInterval(this.opacity),t.fadeOut=this.fadeOut,t.init(),this.particles.set(this.lastId.toString(),t),this.lastId++}setFadeOutType(t,e){if(t=="opacity"&&e.opacity<0||e.opacity>100||t=="opacity-scale"&&e.opacity<0||e.opacity>100)throw new Error("opacity must be between 0 and 100");if(t=="scale"&&e.scaleFactor<0||t=="opacity-scale"&&e.scaleFactor<0)throw new Error("scaleFactor must be greater than 0");this.fadeOut={type:t,options:e}}setFadeInType(t,e){if(t=="opacity"&&e.opacity<0||e.opacity>100||t=="opacity-scale"&&e.opacity<0||e.opacity>100)throw new Error("opacity must be between 0 and 100");if(t=="scale"&&e.scaleFactor<0||t=="opacity-scale"&&e.scaleFactor<0)throw new Error("scaleFactor must be greater than 0");this.fadeIn={type:t,options:e}}init(){const t=this.canvas.getContext("2d");for(let e=0;e<this.ammount;e++)this.createParticle();setInterval(()=>{if(this.particles.size<this.ammount)for(let e=this.particles.size;e<this.ammount;e++)this.createParticle();t==null||t.clearRect(0,0,this.canvas.width,this.canvas.height),this.particles.forEach(e=>{t.fillStyle=e.color.toString(),t.globalAlpha=e.opacity/100,t==null||t.beginPath(),t==null||t.arc(e.position.x,e.position.y,e.diameter/2,0,2*Math.PI,!1),t==null||t.closePath(),t==null||t.fill()})},this.deltaTime)}}return{Particle:r,ParticleSystem:n,RGBA:s,HEX:a,range:h}});
